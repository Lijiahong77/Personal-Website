<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Portfolio</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.2.8/pdfobject.min.js"></script>
</head>
<body>
  <!-- Navigation Bar -->
  <div class="nav">
    <a href="index.html">Home + About</a>
    <a href="portfolio.html" class="active">Portfolio</a>
  </div>

  <!-- Portfolio Header: Title + Filter Tags -->
  <div class="portfolio-header">
    <h2>Portfolio</h2>
    <div class="tags">
      <button class="tag active" onclick="filterWorks('all')">All</button>
      <button class="tag" onclick="filterWorks('image')">Image</button>
      <button class="tag" onclick="filterWorks('video')">Video</button>
      <button class="tag" onclick="filterWorks('pdf')">File</button>
    </div>
  </div>

  <!-- Sorting Function -->
  <div class="sort">
    <select id="sortSelect" onchange="sortWorks()">
      <option value="newest">Newest First</option>
      <option value="oldest">Oldest First</option>
    </select>
  </div>

  <!-- Portfolio Grid with dual links for each work -->
  <div class="portfolio-grid" id="workGrid">
    <!-- 原有作品保持不变 -->
    <!-- Work 1: Character Design (PDF File) -->
    <div class="work-card" data-type="pdf" data-date="2024-09">
      <img src="CoverCD.jpg" alt="Alien Secret Action (Character Design) Cover" 
           onclick="openWork('pdf', 'https://github.com/Lijiahong77/Personal-Website/raw/main/Character%20Design.pdf')">
      <h3>Alien Secret Action (Character Design)</h3>
      <p>Based on alien invasion stories, this work includes design sketches of humans and aliens with distinct roles, along with complete design logic and draft drawings. 
        <a href="javascript:openWork('pdf', 'https://github.com/Lijiahong77/Personal-Website/raw/main/Character%20Design.pdf')" class="pdf-link">(click to view PDF)</a>
      </p>
    </div>

    <!-- Work 2: 3D Modeling (Image Work) -->
    <div class="work-card" data-type="image" data-date="2024-08">
      <img src="Scene displace.jpg" alt="Alien Secret Action (Character Modelling)" 
           onclick="openWork('pdf', 'https://github.com/Lijiahong77/Personal-Website/raw/main/Character%20Modelling.pdf')">
      <h3>Alien Secret Action (Character Modelling)</h3>
      <p>Character and scene modeling completed using MAYA; materials created with Substance Painter. UV unwrapping and wireframe images are included for reference.
        <a href="javascript:openWork('pdf', 'https://github.com/Lijiahong77/Personal-Website/raw/main/Character%20Modelling.pdf')" class="pdf-link">(click to view PDF)</a>
      </p>
    </div>

    <!-- Work 3: Video Work with both video and PDF links -->
    <div class="work-card" data-type="video" data-date="2024-07">
      <img src="Cover.jpg" alt="Five-Water-Formed Fists (Video Cover)" 
           onclick="openWork('video', 'https://youtu.be/Wjli50PeL3k')">
      <h3>Five-Water-Formed Fists</h3>
      <p>Animation project created with Blender. Scenes and characters were developed using licensed online model resources, with custom adjustments for style consistency.
        <a href="javascript:openWork('pdf', 'https://github.com/Lijiahong77/Personal-Website/raw/main/Animation.pdf')" class="pdf-link">(click to view PDF)</a>
      </p>
    </div>

    <!-- Work 4: Drawing Practice (Image Work) -->
    <div class="work-card" data-type="image" data-date="2024-06">
      <img src="CoverDC.jpg" alt="Drawing Practice Example" 
           onclick="openWork('pdf', 'https://github.com/Lijiahong77/Personal-Website/raw/main/Drawing%20Collections.pdf')">
      <h3>Drawing Collection</h3>
      <p>This is the collection of my undergraduate period drawing
        <a href="javascript:openWork('pdf', 'https://github.com/Lijiahong77/Personal-Website/raw/main/Drawing%20Collections.pdf')" class="pdf-link">(click to view PDF)</a>
      </p>
    </div>

    <!-- 新增作品 -->
    <!-- 3D动画1 (视频) -->
    <div class="work-card" data-type="video" data-date="2024-10">
      <img src="BallCover.png" alt="3D Animation: Character Movement" 
           onclick="openWork('video', 'https://youtu.be/LAZtW_CJq5k')">
      <h3>3D Animation Pratice: Ball Instrumentalist</h3>
      <p>A detailed animation study focusing on balls' movement and weight distribution using Blender. Coursework
      </p>
    </div>

    <!-- 3D动画2 (视频) -->
    <div class="work-card" data-type="video" data-date="2024-09">
      <img src="FFDCover.png" alt="3D Animation: Environmental Interaction" 
           onclick="openWork('video', 'https://youtu.be/7hV1RhbJwKM')">
      <h3>3D Animation Practice: Physics Simulation</h3>
      <p>Homage to childhood films: Delicious food falling from the sky. Coursework
      </p>
    </div>

    <!-- 3D建模 (PDF) -->
    <div class="work-card" data-type="pdf" data-date="2024-08">
      <img src="3d_modeling_new_cover.jpg" alt="3D Modeling: Product Design" 
           onclick="openWork('pdf', 'https://github.com/Lijiahong77/Personal-Website/raw/main/3D_Modeling_Product.pdf')">
      <h3>3D Modeling: Product Design Collection</h3>
      <p>Detailed 3D models of consumer products with focus on surface details, material properties and manufacturing considerations.
        <a href="javascript:openWork('pdf', 'https://github.com/Lijiahong77/Personal-Website/raw/main/3D_Modeling_Product.pdf')" class="pdf-link">(click to view PDF)</a>
      </p>
    </div>

    <!-- Process Work 1 (视频) -->
    <div class="work-card" data-type="video" data-date="2024-06">
      <img src="Cold&WarmCover.png" alt="Creative Process Documentation" 
           onclick="openWork('video', 'https://youtu.be/4l6TSA0lmDM')">
      <h3>Interactive Media with the theme of "Cold and Warm", made with Processing</h3>
    </div>

    <!-- Process Work 2 (视频) -->
    <div class="work-card" data-type="video" data-date="2024-05">
      <img src="MoonCover.png" alt="Animation Pipeline Process" 
           onclick="openWork('video', 'https://youtu.be/DayjwNZdMZk')">
      <h3>Animation Pipeline: Production Workflow</h3>
    </div>

    <!-- 3D Scene Design (视频) -->
    <div class="work-card" data-type="video" data-date="2024-04">
      <img src="KRCover.png" alt="3D Scene Design Presentation" 
           onclick="openWork('video', 'https://youtu.be/Rr8d42EB6CU')">
      <h3>3D Scene Design (Coursework)</h3>
      <p>Scene Design is made with prefab models. Two of them are practices. The video is a Kinetic Rush example from the 3D Community Challenge
        <a href="javascript:openWork('pdf', 'https://github.com/Lijiahong77/Personal-Website/raw/main/3D_Scene_Design.pdf')" class="pdf-link">(click to view PDF)</a>
      </p>
    </div>
  </div>

  <!-- Work Preview Modal -->
  <div id="workModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 100; padding: 50px; text-align: center;">
    <button onclick="closeModal()" style="position: absolute; top: 20px; right: 30px; color: white; font-size: 30px; background: transparent; border: none; cursor: pointer;">×</button>
    <div id="modalContent" style="width: 100%; height: 90%;"></div>
  </div>

 <!-- 替换原有的<script>标签内容 -->
<script>
  // 筛选作品（保持不变）
  function filterWorks(type) {
    const cards = document.querySelectorAll('.work-card');
    const tags = document.querySelectorAll('.tag');
    
    tags.forEach(tag => tag.classList.remove('active'));
    document.querySelector(`.tag[onclick="filterWorks('${type}')"]`).classList.add('active');
    
    cards.forEach(card => {
      if (type === 'all' || card.dataset.type === type) {
        card.style.display = 'block';
      } else {
        card.style.display = 'none';
      }
    });
  }

  // 排序作品（保持不变）
  function sortWorks() {
    const select = document.getElementById('sortSelect');
    const grid = document.getElementById('workGrid');
    const cards = Array.from(document.querySelectorAll('.work-card'));
    
    cards.sort((a, b) => {
      if (select.value === 'newest') {
        return b.dataset.date.localeCompare(a.dataset.date);
      } else {
        return a.dataset.date.localeCompare(b.dataset.date);
      }
    });
    
    cards.forEach(card => grid.appendChild(card));
  }

  // 打开作品预览（保持不变）
  function openWork(type, url) {
    const modal = document.getElementById('workModal');
    const content = document.getElementById('modalContent');
    
    content.innerHTML = '';
    
    if (type === 'image') {
      const img = document.createElement('img');
      img.src = url;
      img.style.maxWidth = '100%';
      img.style.maxHeight = '100%';
      img.style.objectFit = 'contain';
      content.appendChild(img);
    } else if (type === 'video') {
      // 视频播放部分保持不变
      const embeddedUrl = url.includes('youtu.be') 
        ? url.replace('youtu.be/', 'youtube.com/embed/') 
        : url;
      
      const iframe = document.createElement('iframe');
      iframe.src = embeddedUrl;
      iframe.style.width = '80%';
      iframe.style.height = '80%';
      iframe.frameBorder = '0';
      iframe.allowFullScreen = true;
      iframe.title = 'Work Video Preview';
      content.appendChild(iframe);
    } else if (type === 'pdf') {
      PDFObject.embed(url, '#modalContent', { 
        width: '100%', 
        height: '100%',
        fallbackLink: '<p style="color:white;">PDF preview unavailable. <a href="' + url + '" target="_blank" style="color:white;">Click here to download</a>.</p>'
      });
    }
    
    modal.style.display = 'block';
  }

  // 【关键修改】关闭弹窗时停止视频播放
  function closeModal() {
    const modal = document.getElementById('workModal');
    const content = document.getElementById('modalContent');
    
    // 查找弹窗中的视频iframe并停止播放
    const videoIframe = content.querySelector('iframe');
    if (videoIframe) {
      // 重置iframe的src，强制停止视频
      videoIframe.src = '';
    }
    
    // 隐藏弹窗
    modal.style.display = 'none';
  }

  // 点击弹窗外部关闭（保持不变）
  window.onclick = function(event) {
    const modal = document.getElementById('workModal');
    if (event.target === modal) {
      closeModal();
    }
  }

  // 按ESC键关闭弹窗（保持不变）
  document.addEventListener('keydown', function(event) {
    if (event.key === 'Escape') {
      closeModal();
    }
  });
</script>
      
  <style>
    /* Style for PDF links in descriptions */
    .pdf-link {
      color: #666666;
      text-decoration: underline;
      margin-left: 5px;
      font-weight: 500;
    }
    
    .pdf-link:hover {
      color: #333333;
      text-decoration: none;
    }
  </style>
</body>
</html>

